# ☝️키워드
### 🔑외래키
외래키는 두 테이블을 서로 연결하는 데 사용되는 키이다.
외래키가 포함된 테이블을 자식 테이블이라고 하고 외래키 값을 제공하는 테이블을 부모 테이블이라고 한다.
외래키 사용시 4가지 주의사항이 있다.

1. 외래키 값은 NULL이거나 부모 테이블의 기본키 값과 동일해야한다. (참조 무결성 제약조건)
2. 부모 테이블의 기본키, 고유키를 외래키로 지정할 수 있다.
3. 부모 테이블의 기본키, 고유키가 여러개의 컬럼으로 이루어져 있다면 부모가 가진 기본키, 고유키 컬럼을 원하는 개수만큼 묶어서 외래키로 지정할 수 있다.
4. 외래키로 지정할 두 테이블의 필드는 같은 데이터 타입이어야 한다.

[출처](https://bamdule.tistory.com/45)

### 🔑기본키
주 키, 프라이머리 키, PK 등으로 불리운다. 후보키들 중 메인으로 선정되는 키로 후보키의 성질을 갖는다.

유일성과 최소성을 가지며, 해당 레코드를 식별할 때 기준이 되는 반드시 필요한 키이다.

추가로 기본키는 다음과 같은 조건을 따른다.

1. 값의 변동이 잦은 후보키는 기본키로 부적절하다.
2. NULL값을 가질 수 있는 속성이 포함된 후보키는 부적절하다.
3. 후보키 중 단순한 키를 기본키로 선택한다.
4. 하나의 테이블에는 반드시 하나의 기본키만 존재한다.

[출처](https://velog.io/@kon6443/DB-%EA%B8%B0%EB%B3%B8%ED%82%A4-%EC%99%B8%EB%9E%98%ED%82%A4-%ED%9B%84%EB%B3%B4%ED%82%A4-%EB%B3%B5%ED%95%A9%ED%82%A4-%EA%B0%9C%EB%85%90-4x1bgz5w)

### 🍔ER 다이어그램

ERD(Entity Relationship Diagram)는 데이터베이스 구조를 한 눈에 알아보기 위해 그려놓는 다이어그램이다. Entity(개체)와 Relationship(관계)를 중점적으로 표시하는 다이어그램으로 구체화하는 것을 의미한다.

1. 개체(Entity)

  개체란 단독으로 존재하는 객체를 의미하며, 동일한 객체는 존재하지 않는다. ERD에서는 개체를 사각형으로 표기한다.
2. 속성(Attribute)
 속성은 개체가 가지고 있는 속성을 의미한다. ERD에서는 속성을 원으로 표기한다. 속성 중 기본키는 밑줄을 그어 표기한다.
3. 관계(Relationship)
 관계는 개체 간의 관계를 의미한다. ERD에선 서로 이으며 관계를 가지는지 마름모로 표기한다. 관계는 1:1, 1:N을 나타낼 수 있는데, N쪽엔 까치발 표기법을 통해 나타낸다.

[출처](https://velog.io/@mong9_s/DBRDBMS-5.-ER%EB%8B%A4%EC%9D%B4%EC%96%B4%EA%B7%B8%EB%9E%A8ERD)

### 🔑복합키
두 개 이상의 컬럼을 묶어서 하나의 기본키로 지정하는 것.

기본키는 하나의 테이블에 하나만 존재할 수 있다, 또한 기본키는 하나 이상의 컬럼으로 구성되어 있다.

만약 기본키가 복합키라면, 복합키 또한 당연히 유일성과 최소성을 만족해야 한다.

[출처](https://velog.io/@kon6443/DB-%EA%B8%B0%EB%B3%B8%ED%82%A4-%EC%99%B8%EB%9E%98%ED%82%A4-%ED%9B%84%EB%B3%B4%ED%82%A4-%EB%B3%B5%ED%95%A9%ED%82%A4-%EA%B0%9C%EB%85%90-4x1bgz5w)

### 연관관계
연관관계란 두 개 이상의 테이블 간에 존재하는 관계를 의미한다.

연관관계의 종류로는 1:1, 1:N, N:1, N:M 네 가지 종류가 존재한다.

관계선의 종류로는 실선과 점선이 존재한다.

1. 실선(Identifying): 식별관계
    
    부모 테이블의 PK가 자식테이블의 FK/PK가 되는 경우
    
    부모가 있어야 자식이 생기는 경우
    
2. 점선(Non-Identifying): 비식별관계
    
    부모테이블의 PK가 자식테이블의 일반속성이 되는 경우
    
    부모가 없어도 자식이 생기는 경우
    

특수 기호의 종류는 3가지가 존재한다.

- ｜ : 1개 / 실선은(dash) ‘1'을 나타낸다.
- ∈ : 여러개 / 까마귀 발(crow’s foot or Many)은 ‘다수' 혹은 '그 이상'을 나타낸다.
- ○ : 0개 / 고리(ring or Optional)은 ‘0'을 나타낸다.

[출처](https://velog.io/@jin5eok5/DB-%EC%97%B0%EA%B4%80%EA%B4%80%EA%B3%84%EC%99%80-ERD)

### 🐜정규화
정규화(Normalization)은 *이상현상이 있는 릴레이션을 분해하여 *이상현상을 없애는 과정이다.

*이상현상(Anomaly): 불필요한 데이터 중복으로 인해 릴레이션에 대한 데이터 삽입, 수정, 삭제 연산을 할 때 발생할 수 있는 부작용

정규화의 목적

- 데이터의 중복을 없애면서 불필요한 데이터를 최소화시킨다. → 무결성 유지
- 데이터베이스 변경 시 이상 현상을 제거할 수 있다.
- 데이터 구성을 논리적이고 직관적으로 할 수 있다.
- DB 저장 용량을 효율적으로 관리할 수 있다.

정규화는 대체적으로 1~3단계 정규화까지의 과정을 거친다.

1. 제1정규화(1NF)

제1정규화는 테이블 컬럼이 원자값(=하나의 값)을 갖도록 테이블을 분리시키는 과정이다.

아래의 규칙들을 만족해야 한다.

- 각 컬럼이 하나의 속성(원자값)만을 가져야 한다.
- 하나의 컬럼은 같은 종류나 타입의 값을 가져야 한다.
- 각 컬럼이 유일한 이름을 가져야 한다.
- 컬럼의 순서가 상관없어야 한다.
2. 제2정규화(2NF)

제2정규화는 테이블의 모든 컬럼이 완전 함수적 종속을 만족하도록 하는 과정이다.

테이블에서 기본키가 복합키로 묶여있는 경우 두 키 중 하나의 키만으로 다른 컬럼을 결정지을 수 있으면 안 된다는 것이다.

아래의 규칙들을 만족해야 한다.

- 제1정규형을 만족해야 한다.
- 모든 컬럼이 완전 함수 종속을 만족해야 한다.
3. 제3정규화(3NF)

제3정규화는 제2정규화가 진행된 테이블에서 *이행적 종속을 없애기 위해 테이블을 분리하는 과정이다.

*이행적 종속: A→B, B→C 이면 A→C가 성립해야 한다.

아래의 규칙들을 만족해야 한다.

- 제2정규형을 만족해야 한다.
- 기본키를 제외한 속성들 간의 이행 종속성이 없어야 한다. 즉, 기본키가 아닌 속성들은 기본키에 의존해야 한다.
4. BCNF(Boyce-codd Normal Form)

BCNF는 제3정규형을 좀 더 강화한 버전이다.

아래의 규칙들을 만족해야 한다.

- 제3정규형을 만족해야 한다.
- 모든 결정자가 후보키 집합에 속해야 한다. → 후보키 집합에 없는 컬럼이 결정자가 되어서는 안된다.

[출처](https://velog.io/@sukyeongs/Database-Normalization)

### ⏰반정규화
반정규화(de-normalization)은 정규화된 엔티티, 속성, 관계에 대해 시스템의 성능향상과 개발과 운영의 단순화를 위해 중복, 통합, 분리 등을 수행하는 데이터 모델링 기법이다. 즉, 성능 향상을 위해 정규화된 데이터 모델에서 중복, 통합, 분리 등을 수행하는 모든 과정을 의미한다.

보통 데이터를 조회할 때 조인으로 인한 성능저하가 예상되는 경우 수행한다.

반정규화 기법은

- 테이블 반정규화
- 속성 반정규화
- 관계 반정규화

가 존재한다.

# ✌️미션
<img width="900" alt="image" src="https://github.com/user-attachments/assets/c04cd7bb-b4ac-44d0-9f19-02544b02dff5" />
<aside>

## <로그인&회원가입>

### 💡유저

- 전화번호(PK)(varchar(10))
- 이름(varchar(20))
- 성별(varchar(20))
- 생년월일(date)
- 주소(varchar(60))
- 위치정보 제공 동의 여부(Boolean)
- 마케팅 수신 동의 여부(Boolean)
- 생성 시간(date(6))
- 업데이트 시간(date(6))

</aside>
<aside>

### 💡음식 카테고리

- id(PK)(bigint)
- 이름(varchar(10))
- 생성 시간(date(6))
- 업데이트 시간(date(6))
</aside>

<aside>

### 💡선호하는 음식 종류

- id(PK)(bigint)
- 유저 id(FK)(bigint)
- 음식 카테고리 id(FK)
- 생성 시간(date(6))
- 업데이트 시간(date(6))
</aside>

## <홈화면 & 미션>

<aside>


### 💡미션 정보

- id (PK) (bigint)
- 가게 id(FK) (bigint)
- 미션 제목 (varchar(60))
- 미션 설명 (varchar(500))
- 미션 보상 (bigint)
- 미션 시작 시간 (datetime(6))
- 미션 종료 시간 (datetime(6))
- 생성 시간 (datetime(6))
- 수정 시간 (datetime(6))
</aside>

<aside>


### 💡유저별 미션 상태

- id (PK) (bigint)
- 가게 id(FK) (bigint)
- 유저 id(FK) (bigint)
- 미션 상태 (ENUM)
- 수락 시간(datetime(6))
- 완료 시간(datetime(6))
- 리뷰 작성 여부(tinyint(1))
- 생성 시간 (datetime(6))
- 수정 시간 (datetime(6))
</aside>

<aside>


## <검색 & 알람>

### 💡가게

- id (PK) (bigint)
- 가게 이름 (varchar(30))
- owner_id (bigint)
- 가게 주소 (varchar(20))
- 가게 전화번호 (varchar(10))
- 생성 시간 (datetime(6))
- 수정 시간 (datetime(6))
</aside>

<aside>


### 💡리뷰

- id (PK) (bigint)
- 유저 미션 id (FK) (bigint)
- 가게 id (FK) (bigint)
- 유저 id (FK) (bigint)
- 리뷰 내용 (text)
- 별점 (float(0,5)) - 별점 0~5점
- 생성 시간 (datetime(6))
- 수정 시간 (datetime(6))
</aside>

<aside>


### 💡리뷰 이미지

- id (PK) (bigint)
- 리뷰 id (FK) (bigint)
- 이미지 url (varchar(255))
- 생성 시간 (varchar(6))
- 수정 시간 (datetime(6))
</aside>

<aside>


### 💡가게 이미지

- id (PK) (bigint)
- 가게 id(FK) (bigint)
- 이미지 url (varchar(255))
- 생성 시간 (datetime(6))
- 수정 시간 (datetime(6))
</aside>

<aside>

### 💡댓글

- id (PK) (bigint)
- 리뷰 id (FK) (bigint)
- 유저 id (FK) (bigint)
- 댓글 내용 (text)
- 생성 시간 (datetime(6))
- 수정 시간 (datetime(6))
</aside>

<aside>

### 💡알람

- id(PK) (bigint)
- 유저 id (FK) (bigint)
- 미션 id (FK) (bigint)
- 유저 미션 id (FK) (bigint)
- 생성 시간 (datetime(6))
- 수정 시간 (datetime(6))
- 알람 타입 (ENUM(’새로운 미션’, ‘리뷰 요청’))
- 알람 내용 (text)
</aside>
